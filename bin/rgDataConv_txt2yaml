#!/usr/bin/env ruby
# vim: fileencoding=utf-8

require 'rubygems'
require 'bundler/setup'
require 'date'
require 'pp'

#require 'rgrb/exec/irc_bot'

data_root_path = File.expand_path('../data/rg', File.dirname(__FILE__))
@output = []

#checkData()
#inputData()
#fileDown()



#def checkData
  #if defined?(ARGV[0])
  #  print("Error: ファイルが指定されていません。\n")
  #  exit 1;
  #end

  target_name = File.basename(ARGV[0], ".txt")

  if File.exist?("#{data_root_path}/#{target_name}.txt")
    input_file_name  = "#{data_root_path}/#{target_name}.txt"
    output_file_name = "#{data_root_path}/#{target_name}.yaml"
  else
    print("Error: 指定したファイルは存在しません。\n")
     exit 1;
  end

  if File.exist?(output_file_name)
    print("Error: 出力対象のパスにファイルかディレクトリが存在します。\n")
    print("#{output_file_name}\n")
    exit 1;
  end
#end

#def inputData
  print("#{target_name} の変換を開始します。\n\n")
  print("このテーブルの簡単な説明を入力してください。\n")
  @output["discription"] = STDIN.gets

  print("\nこのテーブルの作者の名前を入力してください。\n")
  @output["author"] = gets
  
  print("\nこのテーブルを直接IRCから引くようにしますか? ")
  @output["access"] = while true
    print("[Y/n]: ")
    response = gets
    case response
      when /^yY/, /^$/
        'public'
      when /^nN/
        'private'
    end
  end
  
  print("\nこのテーブルのライセンス情報を入力してください。\n")
  @output["license"] = gets
  
  @output["date"] = Date.today.to_s
#end


#def fileDown
  pp @output
#end
